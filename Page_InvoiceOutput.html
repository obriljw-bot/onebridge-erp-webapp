<style>
.ob-container{padding:20px;}

/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
.tab-navigation{
  display:flex;
  gap:0;
  background:white;
  border-radius:8px 8px 0 0;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
  margin-bottom:0;
  border-bottom:2px solid #e5e7eb;
}
.tab-nav-item{
  padding:12px 24px;
  cursor:pointer;
  font-size:14px;
  font-weight:500;
  color:#6b7280;
  border-bottom:3px solid transparent;
  transition:all 0.2s;
  user-select:none;
}
.tab-nav-item:hover{
  color:#2563eb;
  background:#f9fafb;
}
.tab-nav-item.active{
  color:#2563eb;
  border-bottom-color:#2563eb;
  background:white;
}

/* íƒ­ ì½˜í…ì¸  */
.tab-content{
  display:none;
  animation:fadeIn 0.3s;
}
.tab-content.active{
  display:block;
}
@keyframes fadeIn{
  from{opacity:0;}
  to{opacity:1;}
}

/* ìƒë‹¨ ì˜µì…˜ë°” */
.ob-topbar{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  background:white;
  padding:12px;
  border-radius:0 8px 8px 8px;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
  margin-bottom:16px;
  align-items:center;
}
.ob-topbar select,.ob-topbar input{
  padding:6px 8px;
  border:1px solid #d1d5db;
  border-radius:6px;
  font-size:13px;
}

.ob-btn{
  padding:8px 14px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-size:13px;
  transition: all 0.2s;
}
.primary{background:#2563eb;color:white;}
.primary:hover{background:#1d4ed8;}
.secondary{background:#e5e7eb;}
.secondary:hover{background:#d1d5db;}
.success{background:#10b981;color:white;}
.success:hover{background:#059669;}

/* ì¼ê´„ì„ íƒ ë²„íŠ¼ ê·¸ë£¹ */
.bulk-select-group{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  background:#f9fafb;
  padding:8px;
  border-radius:6px;
  border:1px solid #e5e7eb;
}
.bulk-select-btn{
  padding:6px 12px;
  border:1px solid #d1d5db;
  border-radius:4px;
  background:white;
  cursor:pointer;
  font-size:12px;
  transition: all 0.2s;
}
.bulk-select-btn:hover{
  background:#f3f4f6;
  border-color:#9ca3af;
}

/* ì²­êµ¬ì„œ ìš”ì•½ ì¹´ë“œ */
.billing-summary{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
  gap:12px;
  margin-bottom:16px;
  display:none;
}
.billing-summary.active{
  display:grid;
}
.billing-summary-card{
  background:white;
  padding:16px;
  border-radius:8px;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
}
.billing-summary-label{
  font-size:12px;
  color:#64748b;
  margin-bottom:4px;
}
.billing-summary-value{
  font-size:20px;
  font-weight:700;
  color:#1e293b;
}

/* í…Œì´ë¸” */
.ob-table-wrap{
  overflow:auto;
  max-height:720px;
  background:white;
  border-radius:8px;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
  margin-bottom:16px;
}
.ob-table-wrap table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
.ob-table-wrap th,
.ob-table-wrap td{
  padding:8px;
  border-bottom:1px solid #e2e8f0;
  text-align:left;
}
.ob-table-wrap th{
  background:#f1f5f9;
  font-weight:bold;
  position:sticky;
  top:0;
  z-index:10;
}
.ob-table-wrap td.num{
  text-align:right;
}

/* ì •ë ¬ ê°€ëŠ¥ í—¤ë” */
.ob-table-wrap th.sortable{
  cursor:pointer;
  user-select:none;
}
.ob-table-wrap th.sortable:hover{
  background:#e2e8f0;
}
.ob-table-wrap th.sortable::after{
  content:' â‡…';
  opacity:0.3;
  font-size:11px;
}
.ob-table-wrap th.sortable.asc::after{
  content:' â†‘';
  opacity:1;
}
.ob-table-wrap th.sortable.desc::after{
  content:' â†“';
  opacity:1;
}

/* í˜ì´ì§€ë„¤ì´ì…˜ */
.pagination-container{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px;
  background:white;
  border-radius:8px;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
}
.pagination-controls{
  display:flex;
  gap:8px;
  align-items:center;
}
.pagination-btn{
  padding:6px 12px;
  border:1px solid #d1d5db;
  border-radius:4px;
  background:white;
  cursor:pointer;
  font-size:13px;
}
.pagination-btn:disabled{
  opacity:0.4;
  cursor:not-allowed;
}
.pagination-btn:not(:disabled):hover{
  background:#f3f4f6;
}
.pagination-btn.active{
  background:#2563eb;
  color:white;
  border-color:#2563eb;
}
.page-info{
  font-size:13px;
  color:#6b7280;
}
</style>

<div class="ob-container">

  <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
  <div class="tab-navigation">
    <div class="tab-nav-item active" data-tab="order-output">
      ğŸ“‹ ë°œì£¼ë²ˆí˜¸ë³„ ì¶œë ¥
    </div>
    <div class="tab-nav-item" data-tab="bulk-billing">
      ğŸ’³ ì¼ê´„ ì²­êµ¬ì„œ
    </div>
  </div>

  <!-- =============================================== -->
  <!-- íƒ­ 1: ë°œì£¼ë²ˆí˜¸ë³„ ì¶œë ¥ (ê¸°ì¡´) -->
  <!-- =============================================== -->
  <div id="tab-order-output" class="tab-content active">

    <!-- ìƒë‹¨ ì˜µì…˜ë°” -->
    <div class="ob-topbar">
      <label>ë¬¸ì„œ ìœ í˜•</label>
      <select id="inv-doc-type">
        <option value="ë°œì£¼ì„œ(ë§¤ì…)">ë°œì£¼ì„œ(ë§¤ì…)</option>
        <option value="ë°œì£¼ì„œ(ë§¤ì…)_ë¡¬ì•¤">ë°œì£¼ì„œ(ë§¤ì…)_ë¡¬ì•¤</option>
        <option value="ë°œì£¼ì„œ(ë§¤ì…)_ì¢…ê·¼ë‹¹">ë°œì£¼ì„œ(ë§¤ì…)_ì¢…ê·¼ë‹¹</option>
        <option value="ë°œì£¼ì„œ(ë§¤ì…)_ì‚ì•„ê³„ì—´">ë°œì£¼ì„œ(ë§¤ì…)_ì‚ì•„ê³„ì—´</option>
        <option value="ê±°ë˜ëª…ì„¸ì„œ(ì˜ì„¸)">ê±°ë˜ëª…ì„¸ì„œ(ì˜ì„¸)</option>
        <option value="ê±°ë˜ëª…ì„¸ì„œ(ë¶€í¬)">ê±°ë˜ëª…ì„¸ì„œ(ë¶€í¬)</option>
        <option value="ê±°ë˜ëª…ì„¸ì„œ(í•´ì™¸)">ê±°ë˜ëª…ì„¸ì„œ(í•´ì™¸)</option>
      </select>

      <label>ì¶œë ¥ ë°©ì‹</label>
      <select id="inv-default-mode">
        <option value="auto">ìë™(5í–‰ ê¸°ì¤€)</option>
        <option value="full">ì „ì²´ë‚´ì—­</option>
        <option value="short">ë‹¨ì¶•ë‚´ì—­</option>
      </select>

      <label>ë°œì£¼ë²ˆí˜¸</label>
      <input id="inv-order-code" placeholder="OB2025-...">

      <label>ê¸°ê°„</label>
      <input id="inv-start-date" type="date">
      <input id="inv-end-date" type="date">

      <label>ë§¤ì…ì²˜</label>
      <input id="inv-supplier" placeholder="ì—…ì²´ëª…">

      <button id="inv-search-btn" class="ob-btn primary">ì¡°íšŒ</button>
      <button id="inv-export-xlsx" class="ob-btn secondary">Excel ì¶œë ¥</button>
      <button id="inv-export-pdf" class="ob-btn success">PDF ì¶œë ¥</button>

      <div style="display:flex;gap:8px;align-items:center;margin-left:auto;padding:6px 12px;background:#f0f9ff;border-radius:6px;border:1px solid #bfdbfe;">
        <input type="checkbox" id="inv-merge-by-supplier" style="width:16px;height:16px;cursor:pointer;">
        <label for="inv-merge-by-supplier" style="margin:0;font-size:13px;font-weight:500;color:#1e40af;cursor:pointer;">ë§¤ì…ì²˜ë³„ í†µí•© ì¶œë ¥</label>
      </div>
    </div>

    <!-- ì¼ê´„ ì„ íƒ ë²„íŠ¼ ê·¸ë£¹ -->
    <div class="bulk-select-group" id="inv-bulk-select" style="display:none;">
      <span style="font-size:12px;font-weight:bold;color:#6b7280;">ë¹ ë¥¸ ì„ íƒ:</span>
      <button class="bulk-select-btn" id="inv-select-all">ì „ì²´ ì„ íƒ</button>
      <button class="bulk-select-btn" id="inv-deselect-all">ì „ì²´ í•´ì œ</button>
      <span style="border-left:1px solid #d1d5db;height:20px;"></span>
      <span style="font-size:12px;color:#6b7280;">ë¸Œëœë“œë³„:</span>
      <div id="inv-brand-btns"></div>
      <span style="border-left:1px solid #d1d5db;height:20px;"></span>
      <span style="font-size:12px;color:#6b7280;">ë§¤ì…ì²˜ë³„:</span>
      <div id="inv-supplier-btns"></div>
    </div>

    <!-- í…Œì´ë¸” -->
    <div class="ob-table-wrap">
      <table>
        <thead>
          <tr>
            <th><input type="checkbox" id="inv-check-all"></th>
            <th class="sortable" data-sort="orderDate">ë°œì£¼ì¼</th>
            <th class="sortable" data-sort="orderCode">ë°œì£¼ë²ˆí˜¸</th>
            <th class="sortable" data-sort="brand">ë¸Œëœë“œ</th>
            <th class="sortable" data-sort="supplier">ë§¤ì…ì²˜</th>
            <th class="sortable" data-sort="buyer">ë°œì£¼ì²˜</th>
            <th class="sortable num" data-sort="itemCount">í’ˆëª©ìˆ˜</th>
            <th class="sortable num" data-sort="totalPurchaseAmount">ë§¤ì…ì•¡í•©ê³„</th>
            <th class="sortable num" data-sort="totalAmount">ê³µê¸‰ì•¡í•©ê³„</th>
            <th>ì¶œë ¥ë°©ì‹</th>
          </tr>
        </thead>
        <tbody id="inv-result-tbody">
          <tr><td colspan="10" style="text-align:center;color:#777;padding:40px;">ì¡°íšŒ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
        </tbody>
      </table>
    </div>

    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
    <div class="pagination-container" id="inv-pagination" style="display:none;">
      <div class="page-info" id="inv-page-info">0-0 / 0</div>
      <div class="pagination-controls">
        <button class="pagination-btn" id="inv-page-first">ì²˜ìŒ</button>
        <button class="pagination-btn" id="inv-page-prev">ì´ì „</button>
        <div id="inv-page-numbers" style="display:flex;gap:4px;"></div>
        <button class="pagination-btn" id="inv-page-next">ë‹¤ìŒ</button>
        <button class="pagination-btn" id="inv-page-last">ë§ˆì§€ë§‰</button>
      </div>
    </div>

  </div>

  <!-- =============================================== -->
  <!-- íƒ­ 2: ì¼ê´„ ì²­êµ¬ì„œ (ì‹ ê·œ) -->
  <!-- =============================================== -->
  <div id="tab-bulk-billing" class="tab-content">

    <!-- ê²€ìƒ‰ ì˜µì…˜ë°” -->
    <div class="ob-topbar">
      <label>ê±°ë˜ì²˜</label>
      <input id="billing-company" placeholder="ë°œì£¼ì²˜ ì…ë ¥" style="min-width:200px;">

      <label>ê¸°ê°„</label>
      <input id="billing-start-date" type="date">
      <input id="billing-end-date" type="date">

      <button id="billing-search-btn" class="ob-btn primary">ğŸ” ì¡°íšŒ</button>
      <button id="billing-reset-btn" class="ob-btn secondary">ì´ˆê¸°í™”</button>
    </div>

    <!-- ì²­êµ¬ì„œ ìš”ì•½ -->
    <div class="billing-summary" id="billing-summary">
      <div class="billing-summary-card">
        <div class="billing-summary-label">ì´ í’ˆëª©ìˆ˜</div>
        <div class="billing-summary-value" id="billing-total-items">0</div>
      </div>
      <div class="billing-summary-card">
        <div class="billing-summary-label">ì´ ë°œì£¼ìˆ˜ëŸ‰</div>
        <div class="billing-summary-value" id="billing-total-order-qty">0</div>
      </div>
      <div class="billing-summary-card">
        <div class="billing-summary-label">ì´ í™•ì •ìˆ˜ëŸ‰</div>
        <div class="billing-summary-value" id="billing-total-confirmed-qty">0</div>
      </div>
      <div class="billing-summary-card">
        <div class="billing-summary-label">ì´ ì²­êµ¬ê¸ˆì•¡</div>
        <div class="billing-summary-value" id="billing-total-amount">â‚©0</div>
      </div>
    </div>

    <!-- ìƒì„¸ í…Œì´ë¸” -->
    <div class="ob-table-wrap">
      <table>
        <thead>
          <tr>
            <th>ë°œì£¼ë²ˆí˜¸</th>
            <th>ë°œì£¼ì¼</th>
            <th>ë§¤ì…ì²˜</th>
            <th>ë¸Œëœë“œ</th>
            <th>ì œí’ˆëª…</th>
            <th>í’ˆëª©ì½”ë“œ</th>
            <th class="num">ë°œì£¼ìˆ˜ëŸ‰</th>
            <th class="num">í™•ì •ìˆ˜ëŸ‰</th>
            <th class="num">ê³µê¸‰ê°€</th>
            <th class="num">ê³µê¸‰ì•¡</th>
          </tr>
        </thead>
        <tbody id="billing-result-tbody">
          <tr><td colspan="10" style="text-align:center;color:#777;padding:40px;">ê±°ë˜ì²˜ì™€ ê¸°ê°„ì„ ì„ íƒí•˜ì—¬ ì¡°íšŒí•˜ì„¸ìš”</td></tr>
        </tbody>
      </table>
    </div>

    <!-- ì•¡ì…˜ ë²„íŠ¼ -->
    <div style="display:flex;gap:8px;justify-content:flex-end;padding:16px;background:white;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.1);" id="billing-actions" style="display:none;">
      <button class="ob-btn secondary" id="billing-export-xlsx">ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
      <button class="ob-btn success" id="billing-export-pdf">ğŸ“„ PDF ì²­êµ¬ì„œ ìƒì„±</button>
      <button class="ob-btn primary" id="billing-save-db">ğŸ’¾ ì²­êµ¬ì„œ DB ì €ì¥ + ë°œí–‰</button>
    </div>

  </div>

</div>
